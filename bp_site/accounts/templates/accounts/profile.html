{% extends "base.html" %}
{% block title %}My Account | BP Heating & Plumbing{% endblock %}

{% block content %}
<section class="max-w-2xl mx-auto py-10">
  <h1 class="text-2xl font-bold mb-4">My Account</h1>

  <p class="text-gray-700 mb-6">
    Welcome back, <span class="font-semibold">{{ request.user.username }}</span>.
  </p>

  <div class="bg-white rounded-xl shadow p-6 space-y-6">
    <div>
      <h2 class="text-lg font-semibold mb-1">Account Details</h2>
      <p class="text-sm text-gray-600">Username: {{ request.user.username }}</p>
      <p class="text-sm text-gray-600">Email: {{ request.user.email|default:"Not set" }}</p>
    </div>

    <div class="pt-4 border-t">
      <h2 class="text-lg font-semibold mb-2">Magic Word</h2>
      <p class="text-sm text-gray-600 mb-3">
        This secret word will be used as an extra check before allowing password reset.
      </p>

      <p class="text-sm mb-3">
        Current magic word:
        <span class="font-semibold">
          {{ request.user.profile.magic_word|default:"Not set" }}
        </span>
      </p>

      <form method="post" class="space-y-3">
        {% csrf_token %}
        <label class="block text-sm font-medium mb-1">
          Update magic word
        </label>
        <input type="text"
               name="magic_word"
               class="w-full border rounded-lg px-3 py-2"
               placeholder="Enter a secret word you will remember">
        <button class="btn btn-primary btn-sm mt-2">
          Save magic word
        </button>
      </form>
    </div>

    <div class="pt-4 border-t">
      <h2 class="text-lg font-semibold mb-2">Account Security</h2>
      <a href="/accounts/password_change/"
         class="inline-block bg-[#1196E3] hover:bg-[#2156B1] text-white px-4 py-2 rounded-lg shadow transition">
        Change password
      </a>
    </div>

    <div class="pt-4 border-t">
      <a href="/accounts/logout/" class="btn btn-outline btn-sm">
        Log out
      </a>
    </div>
  </div>
</section>
{% endblock %}
