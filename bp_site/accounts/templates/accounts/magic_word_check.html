{% extends "base.html" %}
{% block title %}Confirm Magic Word | BP Heating & Plumbing{% endblock %}

{% block content %}
<section class="max-w-md mx-auto py-10">
  <h1 class="text-2xl font-bold mb-4">Confirm magic word</h1>

  <p class="text-gray-700 mb-6 text-sm">
    We’ve found an account for
    <strong>{{ email }}</strong>.<br>
    Enter the magic word for this account and choose a new password.
  </p>

  {% if error %}
    <p class="text-red-600 mb-4 text-sm">{{ error }}</p>
  {% endif %}

  <form method="post" class="space-y-4 bg-white p-6 rounded-xl shadow">
    {% csrf_token %}

    <div>
      <label class="block text-sm font-medium mb-1">Magic word</label>
      <input type="text"
             name="magic_word"
             class="w-full border rounded-lg px-3 py-2"
             required>
    </div>

    <div>
      <label class="block text-sm font-medium mb-1">New password</label>
      <input type="password"
             name="new_password1"
             class="w-full border rounded-lg px-3 py-2"
             required>
    </div>

    <div>
      <label class="block text-sm font-medium mb-1">Confirm new password</label>
      <input type="password"
             name="new_password2"
             class="w-full border rounded-lg px-3 py-2"
             required>
    </div>

    <button class="btn btn-primary btn-lg w-full">
      Change password
    </button>
  </form>
    <div class="mt-6 border-t pt-4 text-sm text-gray-700">
    <p class="mb-2 font-medium">
      Don’t know your magic word?
    </p>
    <p class="mb-3 text-gray-600">
      You can reset your password using a secure email link instead.
    </p>
    <a href="/accounts/password_reset/"
       class="btn btn-outline btn-sm">
      Reset via email instead
    </a>
  </div>


  <p class="mt-4 text-xs text-gray-500">
    If you made a mistake with your email, you can
    <a href="/accounts/forgot-password-email/" class="underline">
      start again
    </a>.
  </p>
</section>
{% endblock %}
